<!DOCTYPE html>
<html>
<head>
	<script src="CodeMirror-2.21/lib/codemirror.js"></script>
    <script src="CodeMirror-2.21/mode/javascript/javascript.js"></script>
	<script src="scripts/editor.js"></script>
 	<link rel="stylesheet" href="CodeMirror-2.21/lib/codemirror.css">
 	<link rel="stylesheet" href="styles/xcodeTheme.css">
	<link rel="stylesheet" href="styles/editor_stylesheet.css">
	<title>CodeBook</title>
</head>
<body>
<div class="centerlink" ><a target="_blank" href="https://twitter.com/danielchooper">@danielchooper</a></div>
<div id="superContainer">
	 <div id="codeContainer">
		<textarea id="code" name="code">
// Interactive Javascript editor
// By Daniel Hooper
// Based on a design by Bret Victor
//
// Hold down command to drag number's values or 
// highlight elements on the canvas and their respective draw calls
//
// Have Fun!

var paralaxOffset = -107;
var paralaxSpeed = 4;
var forestHeight = 50;
var movementSpeed = 5;
var images;

framerate(50);

function circle(ctx,x,y,r){
    ctx.beginPath();
    ctx.arc(x, y, r, 0, Math.PI*2, true); 
    ctx.closePath();
    ctx.fill();
}

function draw(ctx) {

    // Sky
    ctx.fillStyle = rgb(121,172,217);
    ctx.fillRect(0,0,500,500); 

    // Sun
    ctx.fillStyle=rgb(295,236,91);
	circle(ctx,385,121,56);

    // Trees
    ctx.fillStyle = rgb(2,138,100);
    ctx.fillRect(0,500-forestHeight,500,forestHeight);

    var offset  = -(Math.floor(paralaxOffset / 4)%500);
    if(offset > 0) { offset -= 500; }
	var foresty = 500-images[0].height-forestHeight;
    ctx.drawImage(images[0], offset,  foresty);
    ctx.drawImage(images[0], offset+500, foresty); 

    offset = -(Math.floor(paralaxOffset)%500);
    if(offset > 0) { offset -= 500; }

    ctx.save();
    ctx.translate(offset, 500 - images[1].height);

	// telephone poles
	ctx.drawImage(images[2], 500, -140);
	ctx.drawImage(images[2], 0, -140); 

	// grass
	ctx.drawImage(images[1], 0, 0);
    ctx.drawImage(images[1], 500, 0); 
    ctx.restore();

	// Input
    if(Keys.left) {
        paralaxOffset -= movementSpeed;
    } else if(Keys.right) {
        paralaxOffset += movementSpeed;
    }
}

function getimg(src) {
    var i = new Image();
    i.src = "demoImages/"+src; 
    return i;
}

if (!images) {
    images = [];
    images[0] = getimg("forest.png");
    images[1] = getimg("grass.png");
    images[2] = getimg("pole2.png");
}
</textarea>
		
</div>
<div id="displayContainer">
	<canvas id="TouchCodeMainCanvas" width="500" height="500">
		Your Browser does not support Canvas
	</canvas>
	<div id="sourceHolder"></div>
	<canvas id="TouchCodeHiddenCanvas" width="500" height="500">
		Your Browser does not support Canvas
	</canvas>
</div>
</div>
<div id="errorReport" class="hideReport">hi</div>
</body>
</html>